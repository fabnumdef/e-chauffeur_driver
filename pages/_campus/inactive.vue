<template>
  <main class="full-screen">
    <svg
      class="main-icon"
      width="104"
      height="104"
      viewBox="0 0 104 104"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M91.2215 22.6035C84.5323 22.6035 79.1124 28.0219 79.1124 34.7126V38.7489H64.5185C69.3818 30.4319 71.847 24.1944 71.847 20.1817C71.847 9.0534 62.7936 0 51.6653 0C40.5369 0 31.4835 9.0534 31.4835 20.1817C31.4835 24.1944 33.9487 30.4326 38.812 38.7489C37.1738 38.7489 25.6348 38.7489 24.2181 38.7489V34.7126C24.2181 28.0353 18.7864 22.6035 12.109 22.6035C5.4199 22.6035 0 28.0219 0 34.7126V46.0144C0 47.1291 0.903448 48.0325 2.01817 48.0325C3.1329 48.0325 4.03635 47.1291 4.03635 46.0144V34.7126C4.03635 30.2537 7.64935 26.6399 12.109 26.6399C16.5601 26.6399 20.1817 30.2616 20.1817 34.7126V82.2035C18.0382 80.2823 15.2073 79.1124 12.109 79.1124C9.01004 79.1124 6.18066 80.2839 4.03635 82.2059V62.1598C4.03635 61.045 3.1329 60.1416 2.01817 60.1416C0.903448 60.1416 0 61.045 0 62.1598V91.2215C0 98.1455 5.97726 103.331 12.6845 103.331H91.2215C97.8988 103.331 103.331 97.8988 103.331 91.2215V34.7126C103.331 28.0353 97.8988 22.6035 91.2215 22.6035ZM83.1488 34.7126C83.1488 30.2537 86.7618 26.6399 91.2215 26.6399C95.6725 26.6399 99.2942 30.2616 99.2942 34.7126V82.1484C97.9067 80.913 96.2362 79.9938 94.4143 79.5239C90.3693 78.4778 86.2076 79.4624 83.1488 82.1941C83.1488 80.4684 83.1488 37.1352 83.1488 34.7126ZM79.1124 62.967H53.2798C46.5165 56.527 33.5994 44.224 32.0898 42.7853H41.2583C45.6643 49.8237 50.0042 55.6393 50.0491 55.7C50.4307 56.2093 51.0291 56.5089 51.6653 56.5089C52.3014 56.5089 52.8998 56.2093 53.2814 55.7C53.3263 55.6393 57.667 49.8237 62.0723 42.7853H79.1124V62.967ZM51.6653 4.03635C60.5681 4.03635 67.8106 11.2789 67.8106 20.1817C67.8106 27.675 55.9901 45.0029 51.6653 51.0574C47.2726 44.9067 35.5199 27.6064 35.5199 20.1817C35.5199 11.2789 42.7624 4.03635 51.6653 4.03635ZM4.03635 91.2215C4.03635 86.7704 7.65802 83.1488 12.109 83.1488C16.5601 83.1488 20.1817 86.7704 20.1817 91.2215C20.1817 92.3362 21.0852 93.2396 22.1999 93.2396C23.3146 93.2396 24.2181 92.3362 24.2181 91.2215V57.585L44.7026 77.0942L21.3926 99.2942H12.6845C8.15863 99.2942 4.03635 95.9114 4.03635 91.2215ZM49.0203 78.5558C49.4208 78.1743 49.6471 77.6461 49.6471 77.0942C49.6471 76.5424 49.4208 76.0134 49.0203 75.6326L24.2181 52.0113V42.7853H26.2363C26.3742 42.9169 50.1193 65.5315 51.0811 66.4468C51.4563 66.8039 51.9546 67.0034 52.4725 67.0034H79.1124V75.0761H63.7743C63.239 75.0761 62.7258 75.2889 62.3474 75.6673L38.7198 99.2942H27.2453L49.0203 78.5558ZM91.2215 99.2942H44.429L64.6107 79.1124H79.1124V91.2215C79.1124 92.3362 80.0159 93.2396 81.1306 93.2396C82.2453 93.2396 83.1488 92.3362 83.1488 91.2215C83.1488 86.0018 88.0365 82.0451 93.4052 83.4318C96.6824 84.2785 99.2942 87.3049 99.2942 91.2215C99.2942 95.6725 95.6725 99.2942 91.2215 99.2942Z"
        fill="#007AFF"
      />
      <path
        d="M51.6652 30.2735C57.2294 30.2735 61.7561 25.7468 61.7561 20.1827C61.7561 14.6185 57.2294 10.0918 51.6652 10.0918C46.101 10.0918 41.5743 14.6185 41.5743 20.1827C41.5743 25.7468 46.101 30.2735 51.6652 30.2735ZM51.6652 14.1281C55.0039 14.1281 57.7197 16.844 57.7197 20.1827C57.7197 23.5213 55.0039 26.2372 51.6652 26.2372C48.3266 26.2372 45.6107 23.5213 45.6107 20.1827C45.6107 16.844 48.3266 14.1281 51.6652 14.1281Z"
        fill="#007AFF"
      />
    </svg>
    <div class="half-screen">
      <p>
        <strong>Vous avez au moins une étape enregistrée.</strong>
      </p>
      <p>
        Pour commencer, cliquez
        sur le bouton ci-dessous.
      </p>
    </div>
    <ec-button @click.native="startService">
      Commencer le service
    </ec-button>
  </main>
</template>

<script>
import { mapMutations, mapGetters } from 'vuex';
import ecButton from '~/components/elements/button.vue';
import campusLink from '~/helpers/generate-campus-link';

export default {
  components: {
    ecButton,
  },
  computed: {
    ...mapGetters({
      driverStatus: 'status/current',
      statusList: 'status/list',
      campus: 'context/campus',
    }),
  },
  methods: {
    ...mapMutations({
      setDriverStatus: 'status/setStatus',
    }),
    startService() {
      this.setDriverStatus(this.statusList.ACTIVE);
      this.$router.push(campusLink(this.campus.id, this.driverStatus));
    },
  },
};
</script>

<style lang="scss" scoped>
  @import "~assets/css/head";

  main {
    background-color: $primary;
    color: $white;
  }
</style>
